# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ 500 –ø—Ä–∏ –ª–æ–≥—ñ–Ω—ñ

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–ø—Ä–æ–±—ñ —É–≤—ñ–π—Ç–∏ —á–µ—Ä–µ–∑ Dashboard –≤–∏–Ω–∏–∫–∞—î –ø–æ–º–∏–ª–∫–∞:
```
POST https://flow-managment.vercel.app/api/auth/login 500 (Internal Server Error)
```

## –©–æ –±—É–ª–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

‚úÖ –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —Å—Ç–∞—Ç—É—Å—É HTTP –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ auth-service  
‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º–∏ –ª–æ–≥–∞–º–∏  
‚úÖ –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ JWT_SECRET  
‚úÖ –î–æ–¥–∞–Ω–æ –ª–æ–≥–∏ –¥–ª—è –¥–µ–±–∞–≥—É

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

### 1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –≤ Dashboard –Ω–∞ Vercel

–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Settings** ‚Üí **Environment Variables** –≤–∞—à–æ–≥–æ Dashboard –ø—Ä–æ–µ–∫—Ç—É —ñ –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:

```env
# –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ
NEXT_PUBLIC_AUTH_SERVICE_URL=https://flow-auth-service.vercel.app
AUTH_SERVICE_API_KEY=ea2a45bbaa25e45f2bb8f1cb2d7997f19524a5edbae5f9d476053577e17bd8c9
JWT_SECRET=<–≤–∞—à-jwt-secret-–º—ñ–Ω—ñ–º—É–º-32-—Å–∏–º–≤–æ–ª–∏>
```

**–í–∞–∂–ª–∏–≤–æ:**
- `JWT_SECRET` –º–∞—î **–∑–±—ñ–≥–∞—Ç–∏—Å—è** –º—ñ–∂ Dashboard —ñ auth-service
- `JWT_SECRET` –º–∞—î –±—É—Ç–∏ –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏
- `AUTH_SERVICE_API_KEY` –º–∞—î –∑–±—ñ–≥–∞—Ç–∏—Å—è –∑ `SERVICE_API_KEY` –≤ auth-service

### 2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –≤ Auth Service –Ω–∞ Vercel

–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Settings** ‚Üí **Environment Variables** –≤–∞—à–æ–≥–æ Auth Service –ø—Ä–æ–µ–∫—Ç—É —ñ –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è:

```env
SERVICE_API_KEY=ea2a45bbaa25e45f2bb8f1cb2d7997f19524a5edbae5f9d476053577e17bd8c9
JWT_SECRET=<—Ç–æ–π-—Å–∞–º–∏–π-jwt-secret-—â–æ-–≤-dashboard>
DATABASE_URL=<–≤–∞—à–∞-–±–∞–∑–∞-–¥–∞–Ω–∏—Ö>
REDIS_URL=<–≤–∞—à-redis-url>
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –æ–±–∏–¥–≤–∞ –ø—Ä–æ–µ–∫—Ç–∏

–ü—ñ—Å–ª—è –∑–º—ñ–Ω–∏ –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è:
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Deployments** –æ–±–æ—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Redeploy** –Ω–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ–º—É deployment

## –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ–º–∏–ª–∫–∏

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ 1: Health check auth-service

```bash
curl https://flow-auth-service.vercel.app/health
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```json
{
  "status": "healthy",
  "service": "auth-service",
  ...
}
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ 2: –¢–µ—Å—Ç login endpoint –∑ API key

```bash
curl -X POST https://flow-auth-service.vercel.app/api/auth/login \
  -H "Content-Type: application/json" \
  -H "X-Service-API-Key: ea2a45bbaa25e45f2bb8f1cb2d7997f19524a5edbae5f9d476053577e17bd8c9" \
  -d '{"emailOrUsername":"test@example.com","password":"test123"}'
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤ –Ω–∞ Vercel

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Deployments** ‚Üí –≤–∏–±–µ—Ä—ñ—Ç—å –æ—Å—Ç–∞–Ω–Ω—ñ–π deployment
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **View Function Logs**
3. –®—É–∫–∞–π—Ç–µ –ø–æ–º–∏–ª–∫–∏ –∑ –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º:
   - `Auth service login error:`
   - `Login failed:`
   - `Auth service login network error:`

## –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü–æ–º–∏–ª–∫–∞: "Service API key is required"

**–ü—Ä–∏—á–∏–Ω–∞:** `AUTH_SERVICE_API_KEY` –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ Dashboard –∞–±–æ –Ω–µ –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ `SERVICE_API_KEY` –≤ auth-service.

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `AUTH_SERVICE_API_KEY` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ Dashboard
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `SERVICE_API_KEY` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ auth-service
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∑–Ω–∞—á–µ–Ω–Ω—è **–∑–±—ñ–≥–∞—é—Ç—å—Å—è**
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –æ–±–∏–¥–≤–∞ –ø—Ä–æ–µ–∫—Ç–∏

### –ü–æ–º–∏–ª–∫–∞: "Failed to connect to auth service"

**–ü—Ä–∏—á–∏–Ω–∞:** `NEXT_PUBLIC_AUTH_SERVICE_URL` –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π URL.

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `NEXT_PUBLIC_AUTH_SERVICE_URL=https://flow-auth-service.vercel.app`
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ URL –Ω–µ –º–∞—î trailing slash
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ auth-service –¥–æ—Å—Ç—É–ø–Ω–∏–π: `curl https://flow-auth-service.vercel.app/health`
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Dashboard

### –ü–æ–º–∏–ª–∫–∞: "Invalid response from auth service"

**–ü—Ä–∏—á–∏–Ω–∞:** Auth-service –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å (–Ω–µ–º–∞—î token –∞–±–æ user).

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ auth-service –Ω–∞ Vercel
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ JWT_SECRET –∑–±—ñ–≥–∞—î—Ç—å—Å—è –º—ñ–∂ Dashboard —ñ auth-service

### –ü–æ–º–∏–ª–∫–∞: "Server configuration error"

**–ü—Ä–∏—á–∏–Ω–∞:** `JWT_SECRET` –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∞–±–æ –º–µ–Ω—à–µ 32 —Å–∏–º–≤–æ–ª—ñ–≤.

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `JWT_SECRET` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ Dashboard
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `JWT_SECRET` –º–∞—î –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `JWT_SECRET` –∑–±—ñ–≥–∞—î—Ç—å—Å—è –º—ñ–∂ Dashboard —ñ auth-service
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Dashboard

## –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

–ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—Ä–æ–±–ª–µ–º:

1. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –æ–±–∏–¥–≤–∞ –ø—Ä–æ–µ–∫—Ç–∏ –Ω–∞ Vercel
2. ‚úÖ –°–ø—Ä–æ–±—É–π—Ç–µ —É–≤—ñ–π—Ç–∏ –∑–Ω–æ–≤—É
3. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏, —è–∫—â–æ –ø–æ–º–∏–ª–∫–∞ –≤—Å–µ —â–µ –≤–∏–Ω–∏–∫–∞—î

## –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [Dashboard Auth Service Setup](./DASHBOARD_AUTH_SERVICE_SETUP.md) - –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—é
- [API Keys Setup](./API_KEYS_SETUP.md) - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API keys
- [Vercel API Auth Setup](./VERCEL_API_AUTH_SETUP.md) - –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é

